\section{Limitations}

\label{sec:limitation}

\MP{} utilizes the RDTSC instruction to collect the runtime of system calls, allocations, and deallocations, and the hardware Performance Monitoring Units (PMUs) to collect hardware events. However, both of them will be affected by the scheduling as follows. If a thread is scheduled out by the OS scheduler inside an allocation, the runtime of the current allocation will include the waiting time. Similarly, the PMU events for the current allocation will  include some events not belonging to the current thread. Another issue can be caused when a thread is migrated to a different core, since different hardware cores have their own timestamp registers and hardware events are also specific to hardware cores.  One possible solution is to bind every thread to a specific core, which avoids the migration. However, we believe that this will significantly interfere with the execution. However, we believe that \MP{} is able to present reliable results statistically, since the number of such scheduling events is generally much less than the number of allocations and deallocations.   

%\MP{} may not get a precise number for contending threads and recently-freed objects, due to potential race conditions. Let us use a simple example to explain this case. If  a counter can be incremented and decremented by multiple threads concurrently, then it is better to utilize the synchronization for every operation. However, it could impose significant performance overhead due to the overhead of employing additional synchronization. For such case, \MP{}  